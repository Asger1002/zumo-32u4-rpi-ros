<?xml version="1.0"?>
<launch>

  <include file="$(find hls_lfcd_lds_driver)/launch/hlds_laser.launch" />
  
  <node name="base_link_to_laser" pkg="tf" type="static_transform_publisher" args="0.0 0.0 0.076 0.0 0.0 0.0 /base_link /laser 40"/>
  
  <!-- <node name="odom_to_base_link" pkg="tf" type="static_transform_publisher" args="0.0 0.0 0.0 0.0 0.0 0.0 /base_link /odom_data_quat 40"/> -->
  
  <!--  name="laser_scan_matcher_node" pkg="laser_scan_matcher" type="laser_scan_matcher_node" output="screen"> 
  </node> --> 

  <node pkg="rosserial_python" type="serial_node.py" name="serial_node">
    <param name="port" value="/dev/ttyACM0"/>
    <param name="baud" value="115200"/>
  </node>
  
  <node pkg="zumo_ros" type="odom_publisher_node" name="odom_publisher_node"/>
  
  <node pkg="zumo_ros" type="rviz_nav_goal_2d_node" name="rviz_nav_goal_2d_node"/>

  <include file="$(find slam_toolbox)/online_async.launch"/>


<node pkg="robot_localization" type="ekf_localization_node" name="robot_localization_ekf_node_odom" clear_params="true">
  <param name="frequency" value="10." />
  <param name="sensor_timeout" value="0.2" />
  <param name="two_d_mode" value="true" />
  <param name="publish_tf" value="true" />
  <param name="map_frame" value="map" />
  <param name="odom_frame" value="odom" />
  <param name="base_link_frame" value="base_link" />
  <param name="base_link_output_frame" value="base_link" />
  <param name="world_frame" value="odom" />
  <remap from="odometry/filtered" to="odometry/filtered_odometry" />
  <param name="odom0" value="/odom_data_quat" />
  <param name="odom0_differential" value="false"/>
  <rosparam param="odom0_config">[true,  true,  false,
                                false, false, true,
                                true,  false, false,
                                false, false, true,
                                false, false, false]</rosparam>
</node>

<node pkg="explore_lite" type="explore" respawn="false" name="explore" output="screen">
  <param name="robot_base_frame" value="base_link"/>
  <param name="costmap_topic" value="map"/>
  <param name="costmap_updates_topic" value="map_updates"/>
  <param name="visualize" value="true"/>
  <param name="planner_frequency" value="0.33"/>
  <param name="progress_timeout" value="30.0"/>
  <param name="potential_scale" value="3.0"/>
  <param name="orientation_scale" value="0.0"/>
  <param name="gain_scale" value="1.0"/>
  <param name="transform_tolerance" value="0.3"/>
  <param name="min_frontier_size" value="0.75"/>
</node>


  <!-- Move Base Node -->
  <!-- Subscribe: /move_base_simple/goal -->
  <!-- Publish: /cmd_vel -->
  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find zumo_ros)/param/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find zumo_ros)/param/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find zumo_ros)/param/local_costmap_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find zumo_ros)/param/global_costmap_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find zumo_ros)/param/base_local_planner_params.yaml" command="load" />
  </node>

</launch>
